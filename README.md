# Markoshka

Небольшая утилита для Raspberry Pi 2W, которая выводит дружеские фразы на дисплей покупателя (20x2). Включённый по автозапуску скрипт показывает приветствие, после чего каждые 5 секунд переключает фразу.

## Возможности
- Три режима показа:
  1. **Подряд** — категории и фразы идут последовательно по кругу.
  2. **Рандом** — выбирается любая фраза из любых категорий.
  3. **По разделу** — стартуем с выбранной категории, показываем её фразы, затем следующие категории по кругу.
- Управление одной кнопкой (GPIO17, `pull_up=True`):
  - Короткое нажатие: переключить режим (Подряд → Рандом → По разделу → ...).
  - Долгое нажатие (1.2+ с): выбрать следующую категорию и сразу перейти в режим «По разделу».
- Приветственное сообщение прокручивается бегущей строкой влево; рабочие фразы показываются целиком на двух строках, помещаясь в 20 символов.

## Текстовое оформление
- Приветствие длинное, поэтому оно выводится как бегущая строка **влево** на обеих строках дисплея. Это обеспечивает читабельность на 20x2 без обрезок.
- Рабочие фразы подбирайте так, чтобы каждая целиком помещалась в 20 символов (2 строки по 20 символов при необходимости). В поставке есть 10 тестовых фраз в 9 категориях; их легко заменить на полный список в `markoshka/phrases.py`.

## Запуск
```bash
python main.py
```
При отсутствии `gpiozero` программа работает в консоли: фразы печатаются в терминал, кнопку имитировать не нужно (режим остаётся «Подряд»).

### Автозапуск через systemd
Создайте сервис `/etc/systemd/system/markoshka.service`:
```
[Unit]
Description=Markoshka display loop
After=network.target

[Service]
ExecStart=/usr/bin/python /home/pi/Markoshka/main.py
WorkingDirectory=/home/pi/Markoshka
Restart=always
User=pi

[Install]
WantedBy=multi-user.target
```
Затем выполните:
```bash
sudo systemctl daemon-reload
sudo systemctl enable --now markoshka.service
```

## Настройка под дисплей
Класс `ConsoleDisplayDriver` в `markoshka/display.py` — лишь заглушка. Замените его на драйвер конкретного дисплея (например, HD44780) с методом `write(lines: List[str])`, принимающим две строки по 20 символов.
